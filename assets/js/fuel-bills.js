var fuelBills=()=>{class d{constructor(){this["template-1"]=document.querySelector("app-fuel-bill-main #template-1"),this["template-2"]=document.querySelector("app-fuel-bill-main #template-2"),this["template-3"]=document.querySelector("app-fuel-bill-main #template-3"),this.templates=document.querySelectorAll("app-fuel-bill-main [name='templates']"),this["fs-logo"]=document.querySelectorAll("app-fuel-bill-main [name='fs-logo']"),this["download-fuel-bills"]=document.querySelector("app-fuel-bill-main #download-fuel-bills"),this["form-control"]=document.querySelectorAll("app-fuel-bill-main .form-control"),this["fs-date"]=document.querySelector("app-fuel-bill-main #fs-date"),this["fs-time"]=document.querySelector("app-fuel-bill-main #fs-time"),this["vat-none"]=document.querySelector("app-fuel-bill-main #vat-none"),this["vat-type"]=document.querySelectorAll("app-fuel-bill-main [name='vat-type']"),this["vat-number"]=document.querySelector("app-fuel-bill-main #vat-number"),this["fs-station-name"]=document.querySelector("app-fuel-bill-main #fs-station-name"),this["fs-address"]=document.querySelector("app-fuel-bill-main #fs-address"),this["fs-fuel-rate"]=document.querySelector("app-fuel-bill-main #fs-fuel-rate"),this["fs-amount"]=document.querySelector("app-fuel-bill-main #fs-amount"),this["u-name"]=document.querySelector("app-fuel-bill-main #u-name"),this["u-vechicle-number"]=document.querySelector("app-fuel-bill-main #u-vechicle-number"),this["u-vehicle-type"]=document.querySelector("app-fuel-bill-main #u-vehicle-type"),this["u-payment-type"]=document.querySelector("app-fuel-bill-main #u-payment-type"),this["fs-receipt-number"]=document.querySelector("app-fuel-bill-main #fs-receipt-number"),this["spinner-grow"]=document.querySelector("app-fuel-bill-main .spinner-grow"),this["download-text"]=document.querySelector("app-fuel-bill-main .download-text"),this["select-template"]=document.querySelector("app-fuel-bill-main .select-template"),this["bill-container"]=document.querySelectorAll("app-fuel-bill-main .bill-container"),this.currency=document.querySelector("app-fuel-bill-main [com-fm='currency']"),this.logo=document.querySelector("app-fuel-bill-main [com-fm='logo']"),this["fs-thank-you"]=document.querySelector("app-fuel-bill-main #fs-thank-you")}}let m={},p={},f={},y=new Date,h,r,v=!1,a="fuel-bill-data.js";setCurrencyCall=t=>{var r,a=document.querySelector('[data-fm="select-currency"]');a.selectedIndex=t,m.currency.querySelector('[data-fm="currency-code"]').checked?f.currency.forEach(e=>{e.querySelectorAll('[data-tm="currency"]').forEach(e=>{e.innerHTML=a.options[t].value})}):(r=(r=(r=(r=a.options[t].innerHTML).split("-").pop()).split(",",1).pop()).split(" ").pop(),f.currency.forEach(e=>{e.querySelectorAll('[data-tm="currency"]').forEach(e=>{e.innerHTML=r})}))};var b=(a,e)=>{var t=m[a];let l=f[a],r,o=t.querySelector("[data-fm='upload']"),n=t.querySelector("[data-fm='url']"),c;l.forEach(e=>{r=e.querySelector(`[data-tm='${a}']`).src,e.querySelector(`[data-tm='${a}']`).attributes.url&&""!=e.querySelector(`[data-tm='${a}']`).attributes.url.value&&(n.value=e.querySelector(`[data-tm='${a}']`).attributes.url.value)}),o.addEventListener("change",e=>{var t,r=o.files[0];r&&""==n.value&&((t=new FileReader).readAsDataURL(r),t.addEventListener("load",e=>{l.forEach(t=>{c=this.result||e.srcElement.result,t.querySelectorAll(`[data-tm="${a}"]`).forEach(e=>{e.src=c,t.querySelector(`[data-tm='${a}']`).setAttribute("url",o.files[0].name)})})}))}),n.addEventListener("keyup",e=>{const t=o.files[0];l.forEach(e=>{""!=n.value?e.querySelectorAll(`[data-tm="${a}"]`).forEach(e=>{e.src=n.value,e.setAttribute("url",n.value)}):t?e.querySelectorAll(`[data-tm="${a}"]`).forEach(e=>{e.src=c}):e.querySelectorAll(`[data-tm="${a}"]`).forEach(e=>{e.src=r})})}),e&&e(!0,"Logo has been setted!")},l=e=>{m=new d;{var a="template-2",l;for(l in f={"tele-number":document.querySelectorAll(".tele-number"),"vat-type":document.querySelectorAll(".vat-type"),templates:document.querySelectorAll(".templates")},m=new d)document.querySelector("p[data-error="+l+"]")&&(p[l]=document.querySelector("p[data-error="+l+"]")),document.querySelector("[data-tm="+l+"]")&&"template-1"!=l&&"template-2"!=l&&"template-3"!=l&&(f[l]=document.querySelectorAll("[data-tm="+l+"]")),document.querySelector("[com-tm="+l+"]")&&"template-1"!=l&&"template-2"!=l&&"template-3"!=l&&(f[l]=document.querySelectorAll("app-fuel-bill-main [com-tm="+l+"]")),"template-1"!=l&&"template-2"!=l&&"template-3"!=l||(f[l]=document.querySelector("[data-tm="+l+"]"));h=f[a],f.templates.forEach(e=>{e.classList.add("d-none")}),h.classList.remove("d-none"),m[a].checked=!0,m["fs-station-name"].value="Bharat Petroleum",f["fs-station-name"].forEach(e=>{e.innerHTML="Bharat Petroleum"}),m["fs-date"].value=y.toISOString().substring(0,10),m["fs-time"].value=y.toLocaleString().substring(12,17),f["fs-date"].forEach(e=>{e.innerHTML=y.toISOString().substring(0,10)}),f["fs-time"].forEach(e=>{e.innerHTML=y.toLocaleString().substring(12,17)});let t=Math.floor(1e3+9e3*Math.random()),r=(f["fs-receipt-number"].forEach(e=>{e.innerHTML=t}),m["fs-receipt-number"].value=t,Math.floor(1e6+9e6*Math.random()));f["tele-number"].forEach(e=>{e.innerHTML=r}),f["u-vehicle-type"].forEach(e=>{e.innerHTML=m["u-vehicle-type"].options[m["u-vehicle-type"].selectedIndex].value}),f["u-payment-type"].forEach(e=>{e.innerHTML=m["u-payment-type"].options[m["u-payment-type"].selectedIndex].value})}{let r=document.querySelectorAll(".value-ltr");[m["fs-fuel-rate"],m["fs-amount"]].forEach(t=>{["keyup","change"].forEach(e=>{t.addEventListener(e,e=>{r.forEach(e=>{var t=m["fs-fuel-rate"].value,r=m["fs-amount"].value;if(""==t||""==r||0==t)return 0;r/=t;e.innerHTML=r.toFixed(2)})})})})}if(!v){v=!0,m["fs-logo"].forEach(e=>e.addEventListener("click",t=>{const r=t.currentTarget.id.slice(10).replace("-"," ").split(" ");for(let e=0;e<r.length;e++)r[e]=r[e][0].toUpperCase()+r[e].substr(1);m["fs-station-name"].value=r.join(" "),f["fs-station-name"].forEach(e=>{e.innerHTML=r.join(" ")}),f.logo.forEach(e=>{e.querySelectorAll('[data-tm="logo"]').forEach(e=>{e.src=server.serverPath+"/assets/images/bill/"+t.currentTarget.id+".webp"})})})),m["vat-type"].forEach(e=>e.addEventListener("click",t=>{"vat-none"==t.currentTarget.id?(f["vat-none"].forEach(e=>{e.classList.add("d-none")}),m["vat-number"].classList.add("d-none")):(m["vat-number"].classList.remove("d-none"),f["vat-none"].forEach(e=>{e.classList.remove("d-none")}),f["vat-type"].forEach(e=>{e.innerHTML=t.target.id.slice(4).toLocaleUpperCase()+" NO: "}),f["vat-number"].forEach(e=>{e.innerHTML=m["vat-number"].value}))})),m["form-control"].forEach(function(t){["keyup","change"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})})})}),m["form-control"].forEach(t=>{document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})});let r=!1;m.templates.forEach(t=>t.addEventListener("click",e=>{m.templates.forEach(e=>{e.id!=t.id&&(h=f[t.id],f[e.id].classList.add("d-none"))}),f[t.id].classList.remove("d-none"),"template-3"!=t.id||r||(r=!0,m.logo.classList.contains("disable"))||m.logo.querySelector(".com-disable").click()})),m["download-fuel-bills"].addEventListener("click",()=>{{var e=(e,t)=>{var r;e&&(m["spinner-grow"].style.display="inline-block",m["download-text"].innerHTML="PDF Generating...",e=h.cloneNode(!0),(r=document.createElement("div")).id="pdf-wrapper",r.setAttribute("class","pdf-wrapper"),r.appendChild(e),html2pdf().set({jsPDF:{format:"a4",orientation:"portrait"},html2canvas:{letterRendering:!0,useCORS:!0,logging:!0,scrollX:0,scrollY:0},margin:0,image:{type:"jpeg",quality:1.1}}).from(r).toPdf().save("Fuel Bill "+server.pdfName).then(e=>{m["spinner-grow"].style.display="none",m["download-text"].innerHTML="Download",saveLogs("download",{id:"23",pageName:""+server.pageName,template:""+h.attributes["data-tm"].value,metaData:""})}).catch(e=>{saveLogs("error",{id:"23",pageName:""+server.pageName,eventName:"PDF Download",msg:"On PDF download button clicked :   "+e,metaData:'{"server" : '+server.serverPath})}))};let r=!0,a=document.getElementsByClassName("validation-message");Object.keys(a).some(function(e){var t;if("block"==a[e].style.display)return t="ErrorAdress"==a[e].id?130:80,t=a[e].getBoundingClientRect().top+window.pageYOffset-t,window.scrollTo({top:t,behavior:"smooth"}),r=!1,a[e].previousElementSibling.focus(),!0}),r?e(!0,"Template ready"):e(!1,"Template not ready")}});{a=document.querySelectorAll(".com-wrapper");let r;a.forEach(t=>{t.querySelector(".com-disable")&&t.querySelector(".com-disable").addEventListener("click",e=>{t.classList.toggle("disable"),t.attributes["com-fm"]&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.toggle("d-none")})}),document.querySelector(`[com-tm='${t.attributes["com-fm"].value}']`).classList.contains("d-none")&&(t.querySelector(".com-disable").checked=!0,t.classList.add("disable")),t.querySelector(".com-close").addEventListener("click",e=>{t.classList.toggle("close")}),t.querySelector(".com-clear")&&t.querySelector(".com-clear").addEventListener("click",e=>{r=t.attributes["com-fm"].value,1!=t.querySelector(".com-disable").checked&&(t.querySelectorAll('.com-body input[type="text"]').forEach(e=>{e.value=""}),t.querySelectorAll(".com-body textarea").forEach(e=>{elA.value=""}),t.querySelectorAll('.com-body input[type="file"]').forEach(e=>{e.value=""}),document.querySelectorAll(`[com-tm="${r}"]`).forEach(e=>{e.querySelectorAll("[data-tm]").forEach(e=>{e.src||(e.innerHTML="")})}))})})}(o=document.querySelector('[data-fm="select-currency"]')).addEventListener("change",()=>{setCurrencyCall(o.selectedIndex)}),m.currency.querySelectorAll('[name="currency-type"').forEach(e=>{e.addEventListener("click",()=>{setCurrencyCall(o.selectedIndex)})}),n=[],o.querySelectorAll("option").forEach((e,t)=>{e={[e.innerHTML]:t};n[t]=e}),c=document.querySelector('[data-fm="search-currency-box"]'),u=document.querySelector('[data-fm="search-currency"]'),s="",i=[],window.addEventListener("click",function(e){e.target.attributes["data-fm"]&&("search-currency-box"==e.target.attributes["data-fm"].value||"search-currency"==e.target.attributes["data-fm"].value)||c.classList.add("d-none")}),u.addEventListener("keyup",e=>{t(u.value)}),u.addEventListener("focusin",e=>{t(u.value)}),b("logo")}function t(e){""!=(s=e)?(0<(i=n.filter(e=>{return Object.keys(e).toString().toLowerCase().includes(s.toLowerCase())})).length&&(i.forEach((e,t,r)=>{e=`<button class="d-block" onclick="setCurrencyCall(${Object.values(e)})">${Object.keys(e)}</button>`;i[t]=e}),c.classList.remove("d-none")),i.length,0<i.length&&(c.innerHTML="",i.forEach((e,t)=>{c.innerHTML+=e}))):(c.classList.add("d-none"),i=[])}var o,n,c,u,s,i;e&&e(!0,"Bind event is called!")};{var e=(e,t)=>{e?(document.querySelectorAll("app-fuel-bill-main [data-dynamic]").forEach(e=>{e=e.attributes["data-dynamic"].value;addDynamicHTML(e,template[e],!1)}),r=!0,l()):saveLogs("error",{id:"23",pageName:""+server.pageName,eventName:"partial load",msg:""+t,metaData:'{"server" : '+server.serverPath})},o=document.querySelectorAll("script");let t=!1;o.forEach(e=>{e.src.replace(/^.*[\\\/]/,"")==a&&(t=!0)}),t||((o=document.createElement("script")).src=server.serverPath+("/assets/js/partialPage/"+a),o.async=!0,o.onload=()=>{e(!0,"Script loaded successfuly")},o.onerror=()=>{e(!1,"Error occurred while loading script")},document.body.appendChild(o))}};fuelBills();