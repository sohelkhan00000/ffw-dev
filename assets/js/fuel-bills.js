var fuelBills=()=>{class d{constructor(){this["template-1"]=document.querySelector("app-fuel-bill-main #template-1"),this["template-2"]=document.querySelector("app-fuel-bill-main #template-2"),this["template-3"]=document.querySelector("app-fuel-bill-main #template-3"),this.templates=document.querySelectorAll("app-fuel-bill-main [name='templates']"),this["fs-logo"]=document.querySelectorAll("app-fuel-bill-main [name='fs-logo']"),this["download-fuel-bills"]=document.querySelector("app-fuel-bill-main #download-fuel-bills"),this["form-control"]=document.querySelectorAll("app-fuel-bill-main .form-control"),this["form-select"]=document.querySelectorAll("app-fuel-bill-main .form-select"),this["fs-date"]=document.querySelector("app-fuel-bill-main #fs-date"),this["fs-time"]=document.querySelector("app-fuel-bill-main #fs-time"),this["vat-none"]=document.querySelector("app-fuel-bill-main #vat-none"),this["vat-type"]=document.querySelectorAll("app-fuel-bill-main [name='vat-type']"),this["vat-number"]=document.querySelector("app-fuel-bill-main #vat-number"),this["fs-station-name"]=document.querySelector("app-fuel-bill-main #fs-station-name"),this["fs-address"]=document.querySelector("app-fuel-bill-main #fs-address"),this["fs-fuel-rate"]=document.querySelector("app-fuel-bill-main #fs-fuel-rate"),this["fs-amount"]=document.querySelector("app-fuel-bill-main #fs-amount"),this["u-name"]=document.querySelector("app-fuel-bill-main #u-name"),this["u-vechicle-number"]=document.querySelector("app-fuel-bill-main #u-vechicle-number"),this["u-vehicle-type"]=document.querySelector("app-fuel-bill-main #u-vehicle-type"),this["u-payment-type"]=document.querySelector("app-fuel-bill-main #u-payment-type"),this["fs-receipt-number"]=document.querySelector("app-fuel-bill-main #fs-receipt-number"),this["spinner-grow"]=document.querySelector("app-fuel-bill-main .spinner-grow"),this["download-text"]=document.querySelector("app-fuel-bill-main .download-text"),this["select-template"]=document.querySelector("app-fuel-bill-main .select-template"),this["bill-container"]=document.querySelectorAll("app-fuel-bill-main .bill-container"),this.currency=document.querySelector("app-fuel-bill-main [com-fm='currency']"),this.logo=document.querySelector("app-fuel-bill-main [com-fm='logo']"),this["fs-thank-you"]=document.querySelector("app-fuel-bill-main #fs-thank-you")}}let m={},p={},f={},y=new Date,h,l,v=!1,r="fuel-bill-data.js";setCurrencyCall=t=>{var l,r=document.querySelector('[data-fm="select-currency"]');r.selectedIndex=t,m.currency.querySelector('[data-fm="currency-code"]').checked?f.currency.forEach(e=>{e.querySelectorAll('[data-tm="currency"]').forEach(e=>{e.innerHTML=r.options[t].value})}):(l=(l=(l=(l=r.options[t].innerHTML).split("-").pop()).split(",",1).pop()).split(" ").pop(),f.currency.forEach(e=>{e.querySelectorAll('[data-tm="currency"]').forEach(e=>{e.innerHTML=l})}))};var b=(r,e)=>{var t=m[r];let a=f[r],l,o=t.querySelector("[data-fm='upload']"),c=t.querySelector("[data-fm='url']"),n;a.forEach(e=>{l=e.querySelector(`[data-tm='${r}']`).src,e.querySelector(`[data-tm='${r}']`).attributes.url&&""!=e.querySelector(`[data-tm='${r}']`).attributes.url.value&&(c.value=e.querySelector(`[data-tm='${r}']`).attributes.url.value)}),o.addEventListener("change",e=>{var t,l=o.files[0];l&&""==c.value&&((t=new FileReader).readAsDataURL(l),t.addEventListener("load",e=>{a.forEach(t=>{n=this.result||e.srcElement.result,t.querySelectorAll(`[data-tm="${r}"]`).forEach(e=>{e.src=n,t.querySelector(`[data-tm='${r}']`).setAttribute("url",o.files[0].name)})})}))}),c.addEventListener("keyup",e=>{const t=o.files[0];a.forEach(e=>{""!=c.value?e.querySelectorAll(`[data-tm="${r}"]`).forEach(e=>{e.src=c.value,e.setAttribute("url",c.value)}):t?e.querySelectorAll(`[data-tm="${r}"]`).forEach(e=>{e.src=n}):e.querySelectorAll(`[data-tm="${r}"]`).forEach(e=>{e.src=l})})}),e&&e(!0,"Logo has been setted!")},a=e=>{m=new d;{var a="template-2",r;for(r in f={"tele-number":document.querySelectorAll(".tele-number"),"vat-type":document.querySelectorAll(".vat-type"),templates:document.querySelectorAll(".templates")},m=new d)document.querySelector("p[data-error="+r+"]")&&(p[r]=document.querySelector("p[data-error="+r+"]")),document.querySelector("[data-tm="+r+"]")&&"template-1"!=r&&"template-2"!=r&&"template-3"!=r&&(f[r]=document.querySelectorAll("[data-tm="+r+"]")),document.querySelector("[com-tm="+r+"]")&&"template-1"!=r&&"template-2"!=r&&"template-3"!=r&&(f[r]=document.querySelectorAll("app-fuel-bill-main [com-tm="+r+"]")),"template-1"!=r&&"template-2"!=r&&"template-3"!=r||(f[r]=document.querySelector("[data-tm="+r+"]"));h=f[a],f.templates.forEach(e=>{e.classList.add("d-none")}),h.classList.remove("d-none"),m[a].checked=!0,m["fs-station-name"].value="Bharat Petroleum",f["fs-station-name"].forEach(e=>{e.innerHTML="Bharat Petroleum"}),m["fs-date"].value=y.toISOString().substring(0,10),m["fs-time"].value=y.toLocaleString().substring(12,17),f["fs-date"].forEach(e=>{e.innerHTML=y.toISOString().substring(0,10)}),f["fs-time"].forEach(e=>{e.innerHTML=y.toLocaleString().substring(12,17)});let t=Math.floor(1e3+9e3*Math.random()),l=(f["fs-receipt-number"].forEach(e=>{e.innerHTML=t}),m["fs-receipt-number"].value=t,Math.floor(1e6+9e6*Math.random()));f["tele-number"].forEach(e=>{e.innerHTML=l}),f["u-vehicle-type"].forEach(e=>{e.innerHTML=m["u-vehicle-type"].options[m["u-vehicle-type"].selectedIndex].value}),f["u-payment-type"].forEach(e=>{e.innerHTML=m["u-payment-type"].options[m["u-payment-type"].selectedIndex].value})}{let l=document.querySelectorAll(".value-ltr");[m["fs-fuel-rate"],m["fs-amount"]].forEach(t=>{["keyup","change"].forEach(e=>{t.addEventListener(e,e=>{l.forEach(e=>{var t=m["fs-fuel-rate"].value,l=m["fs-amount"].value;if(""==t||""==l||0==t)return 0;l/=t;e.innerHTML=l.toFixed(2)})})})})}if(!v){v=!0,m["fs-logo"].forEach(e=>e.addEventListener("click",t=>{const l=t.currentTarget.id.slice(10).replace("-"," ").split(" ");for(let e=0;e<l.length;e++)l[e]=l[e][0].toUpperCase()+l[e].substr(1);m["fs-station-name"].value=l.join(" "),f["fs-station-name"].forEach(e=>{e.innerHTML=l.join(" ")}),f.logo.forEach(e=>{e.querySelectorAll('[data-tm="logo"]').forEach(e=>{e.src=server.serverPath+"/assets/images/bill/"+t.currentTarget.id+".webp"})})})),m["vat-type"].forEach(e=>e.addEventListener("click",t=>{"vat-none"==t.currentTarget.id?(f["vat-none"].forEach(e=>{e.classList.add("d-none")}),m["vat-number"].classList.add("d-none")):(m["vat-number"].classList.remove("d-none"),f["vat-none"].forEach(e=>{e.classList.remove("d-none")}),f["vat-type"].forEach(e=>{e.innerHTML=t.target.id.slice(4).toLocaleUpperCase()+" NO: "}),f["vat-number"].forEach(e=>{e.innerHTML=m["vat-number"].value}))})),m["form-control"].forEach(function(t){["keyup","change"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})})})}),m["form-select"].forEach(function(t){["change"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})})})}),m["form-control"].forEach(t=>{document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})});let l=!1,r=!1;m.templates.forEach(t=>t.addEventListener("click",e=>{m.templates.forEach(e=>{e.id!=t.id&&(h=f[t.id],f[e.id].classList.add("d-none"))}),f[t.id].classList.remove("d-none"),"template-3"!=t.id||l||(l=!0,m.logo.classList.contains("disable"))||m.logo.querySelector(".com-disable").click(),!l||r||"template-1"!=t.id&&"template-2"!=t.id||(r=!0,m.logo.classList.contains("disable")&&m.logo.querySelector(".com-disable").click())})),m["download-fuel-bills"].addEventListener("click",()=>{{var e=(e,t)=>{var l;e&&(m["spinner-grow"].style.display="inline-block",m["download-text"].innerHTML="PDF Generating...",e=h.cloneNode(!0),(l=document.createElement("div")).id="pdf-wrapper",l.setAttribute("class","pdf-wrapper"),l.appendChild(e),html2pdf().set({jsPDF:{format:"a4",orientation:"portrait"},html2canvas:{letterRendering:!0,useCORS:!0,logging:!0,scrollX:0,scrollY:0},margin:0,image:{type:"jpeg",quality:1.1}}).from(l).toPdf().save("Fuel Bill "+server.pdfName).then(e=>{m["spinner-grow"].style.display="none",m["download-text"].innerHTML="Download",saveLogs("download",{id:"23",pageName:""+server.pageName,template:""+h.attributes["data-tm"].value,metaData:""})}).catch(e=>{saveLogs("error",{id:"23",pageName:""+server.pageName,eventName:"PDF Download",msg:"On PDF download button clicked :   "+e,metaData:'{"server" : '+server.serverPath})}))};let l=!0,r=document.getElementsByClassName("validation-message");Object.keys(r).some(function(e){var t;if("block"==r[e].style.display)return t="ErrorAdress"==r[e].id?130:80,t=r[e].getBoundingClientRect().top+window.pageYOffset-t,window.scrollTo({top:t,behavior:"smooth"}),l=!1,r[e].previousElementSibling.focus(),!0}),l?e(!0,"Template ready"):e(!1,"Template not ready")}});{a=document.querySelectorAll(".com-wrapper");let l;a.forEach(t=>{t.querySelector(".com-disable")&&t.querySelector(".com-disable").addEventListener("click",e=>{t.classList.toggle("disable"),t.attributes["com-fm"]&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.toggle("d-none")})}),document.querySelector(`[com-tm='${t.attributes["com-fm"].value}']`).classList.contains("d-none")&&(t.querySelector(".com-disable").checked=!0,t.classList.add("disable")),t.querySelector(".com-close").addEventListener("click",e=>{t.classList.toggle("close")}),t.querySelector(".com-clear")&&t.querySelector(".com-clear").addEventListener("click",e=>{l=t.attributes["com-fm"].value,1!=t.querySelector(".com-disable").checked&&(t.querySelectorAll('.com-body input[type="text"]').forEach(e=>{e.value=""}),t.querySelectorAll(".com-body textarea").forEach(e=>{elA.value=""}),t.querySelectorAll('.com-body input[type="file"]').forEach(e=>{e.value=""}),document.querySelectorAll(`[com-tm="${l}"]`).forEach(e=>{e.querySelectorAll("[data-tm]").forEach(e=>{e.src||(e.innerHTML="")})}))})})}(o=document.querySelector('[data-fm="select-currency"]')).addEventListener("change",()=>{setCurrencyCall(o.selectedIndex)}),m.currency.querySelectorAll('[name="currency-type"').forEach(e=>{e.addEventListener("click",()=>{setCurrencyCall(o.selectedIndex)})}),c=[],o.querySelectorAll("option").forEach((e,t)=>{e={[e.innerHTML]:t};c[t]=e}),n=document.querySelector('[data-fm="search-currency-box"]'),u=document.querySelector('[data-fm="search-currency"]'),i="",s=[],window.addEventListener("click",function(e){e.target.attributes["data-fm"]&&("search-currency-box"==e.target.attributes["data-fm"].value||"search-currency"==e.target.attributes["data-fm"].value)||n.classList.add("d-none")}),u.addEventListener("keyup",e=>{t(u.value)}),u.addEventListener("focusin",e=>{t(u.value)}),b("logo")}function t(e){""!=(i=e)?(0<(s=c.filter(e=>{return Object.keys(e).toString().toLowerCase().includes(i.toLowerCase())})).length&&(s.forEach((e,t,l)=>{e=`<button class="d-block" onclick="setCurrencyCall(${Object.values(e)})">${Object.keys(e)}</button>`;s[t]=e}),n.classList.remove("d-none")),s.length,0<s.length&&(n.innerHTML="",s.forEach((e,t)=>{n.innerHTML+=e}))):(n.classList.add("d-none"),s=[])}var o,c,n,u,i,s;e&&e(!0,"Bind event is called!")};{var e=(e,t)=>{e?(document.querySelectorAll("app-fuel-bill-main [data-dynamic]").forEach(e=>{e=e.attributes["data-dynamic"].value;addDynamicHTML(e,template[e],!1)}),l=!0,a()):saveLogs("error",{id:"23",pageName:""+server.pageName,eventName:"partial load",msg:""+t,metaData:'{"server" : '+server.serverPath})},o=document.querySelectorAll("script");let t=!1;o.forEach(e=>{e.src.replace(/^.*[\\\/]/,"")==r&&(t=!0)}),t||((o=document.createElement("script")).src=server.serverPath+("/assets/js/partialPage/"+r),o.async=!0,o.onload=()=>{e(!0,"Script loaded successfuly")},o.onerror=()=>{e(!1,"Error occurred while loading script")},document.body.appendChild(o))}};fuelBills();