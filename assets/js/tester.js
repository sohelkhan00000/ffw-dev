var tester=()=>{class a{constructor(){this["template-1"]=document.querySelector("app-tester #template-1"),this["template-2"]=document.querySelector("app-tester #template-2"),this.templates=document.querySelectorAll("app-tester [name='templates']"),this["tester-driver-name"]=document.querySelector("app-tester #tester-driver-name"),this["tester-vehical-number"]=document.querySelector("app-tester #tester-vehical-number"),this["tester-address"]=document.querySelector("app-tester #tester-address"),this["tester-date"]=document.querySelector("app-tester #tester-date"),this["tester-time"]=document.querySelector("app-tester #tester-time"),this["tester-month"]=document.querySelector("app-tester #tester-month"),this["tester-signature"]=document.querySelector("app-tester #tester-signature"),this["tester-signature-remove"]=document.querySelector("app-tester [aria-label='tester-signature']"),this["tester-logo"]=document.querySelector("app-tester [com-fm='tester-logo'"),this["tester-items"]=document.querySelector("app-tester [ffo-fmcomp='tester-items'"),this.currency=document.querySelector("app-tester [com-fm='currency']"),this["download-pdf"]=document.querySelector("app-tester #download-pdf"),this["spinner-grow"]=document.querySelector("app-tester .spinner-grow"),this["download-text"]=document.querySelector("app-tester .download-text"),this["form-control"]=document.querySelectorAll("app-tester .form-control"),this["template-view-modal"]=document.querySelector("app-tester #template-view-modal"),this["tester-view"]=document.querySelector("app-tester #tester-view")}}let l={},s={},c={},o=new Date,n,r="template-1",d,i="tester-dynamic-data.js";let t=!1;{var e=(e,t)=>{e&&(document.querySelectorAll("app-tester [data-dynamic]").forEach(e=>{e=e.attributes["data-dynamic"].value;addDynamicHTML(e,testerDynamicData[e],!1)}),E(r,(e,t)=>{e&&L((e,t)=>{})}))},m=document.querySelectorAll("script");let t=!1;m.forEach(e=>{e.src.replace(/^.*[\\\/]/,"")==i&&(t=!0)}),t||((m=document.createElement("script")).src=server.jsPath+"/partialPage/"+i,m.async=!0,m.onload=()=>{e(!0,"Dynamic data loaded")},m.onerror=()=>{e(!1,"Error occurred while loading dynamic data")},document.body.appendChild(m))}var u,p,y,v,f,h,g=()=>{l["form-control"].forEach(t=>{["keyup","change"].forEach(function(e){t.addEventListener(e,function(){""!=t.id&&document.querySelectorAll("."+t.id).forEach(e=>{e.innerHTML=t.value})})})}),l["tester-signature"].addEventListener("change",e=>{var t,r=l["tester-signature"].files[0];r&&(l["tester-signature-remove"].classList.remove("d-none"),(t=new FileReader).readAsDataURL(r),t.addEventListener("load",t=>{c["tester-signature"].forEach(e=>{this.result?e.src=this.result:e.src=t.srcElement.result,e.classList.remove("d-none")})}))}),l["tester-signature-remove"].addEventListener("click",e=>{l["tester-signature"].files[0]&&(l["tester-signature"].value="",c["tester-signature"].forEach(e=>{e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}),l["tester-signature-remove"].classList.toggle("d-none"))}),l["template-view-modal"].addEventListener("click",e=>{b()}),d=new bootstrap.Modal(l["tester-view"]),window.addEventListener("click",function(e){"modal-body"==e.target.classList[0]&&d.toggle()}),["touchend","ondblclick"].forEach(t=>{c.templates.forEach(e=>{var r,a;"ondblclick"==t?e.ondblclick=()=>{b(),d.toggle()}:"touchend"==t&&(a=0,e.addEventListener(t,()=>{var e=(new Date).getTime(),t=e-a;clearTimeout(r),t<500&&0<t?(b(),d.toggle(),event.preventDefault()):r=setTimeout(function(){clearTimeout(r)},500),a=e}))})}),l.templates.forEach(t=>t.addEventListener("click",e=>{l.templates.forEach(e=>{e.id!=t.id&&(c[t.id].classList.remove("d-none"),n=c[t.id],c[e.id].classList.add("d-none"))})}));let a=l["tester-logo"].querySelector("#tester-logo"),s=l["tester-logo"].querySelector("#tester-logo-url");var e=l["tester-logo"].querySelector("[data-x='tester-logo']");let o;a.addEventListener("change",e=>{var t,r=a.files[0];r&&""==s.value&&((t=new FileReader).readAsDataURL(r),t.addEventListener("load",t=>{c["tester-logo"].forEach(e=>{o=this.result||t.srcElement.result,e.src=o})}))}),s.addEventListener("keyup",e=>{const t=a.files[0];c["tester-logo"].forEach(e=>{""!=s.value?e.src=s.value:t?e.src=o:e.src=""})}),e.addEventListener("click",e=>{""==s.value&&c["tester-logo"].forEach(e=>{e.src=""}),a.value=""}),t=t||!0},E=async(e,t)=>{for(var r in dragScroller("tester-template-wrapper"),c={templates:document.querySelectorAll("app-tester .template-wrapper > .templates"),"modal-body":document.querySelector("app-tester .modal-body"),"tester-stamp":document.querySelectorAll("app-tester .template-wrapper .tester-stamp")},l=new a)document.querySelector("app-tester p[data-error="+r+"]")&&(s[r]=document.querySelector("app-tester p[data-error="+r+"]")),document.querySelector("[data-tm="+r+"]")&&"template-1"!=r&&"template-2"!=r&&(c[r]=document.querySelectorAll("app-tester  [data-tm="+r+"]")),"template-1"!=r&&"template-2"!=r||(c[r]=document.querySelector("app-tester .template-wrapper > [data-tm="+r+"]")),"tester-items"==r&&(c[r]=document.querySelectorAll(`app-tester [ffo-tmcomp="${r}"]`)),document.querySelector("[com-tm="+r+"]")&&(c[r]=document.querySelectorAll("app-tester [com-tm="+r+"]"));n=c[e],c.templates.forEach(e=>{e.classList.add("d-none")}),n.classList.remove("d-none"),l[e].checked=!0,l["tester-date"].value=o.toISOString().substring(0,10),l["tester-time"].value=o.toISOString().substring(11,16),c["tester-date"].forEach(e=>{e.innerHTML=o.toISOString().substring(0,10)}),c["tester-time"].forEach(e=>{e.innerHTML=o.toISOString().substring(11,16)}),c["tester-month"].forEach(e=>{e.innerHTML=l["tester-month"].options[l["tester-month"].selectedIndex].value}),c["tester-stamp"].forEach(e=>{e.src=server.serverPath+"/assets/images/driver-salary/revenu.webp"}),g(),t(!0,"page is ready!")},S=(E(r,(e,t)=>{}),(e,t,r,a)=>{return"Name"==t?""==e?(a(!1,r+" cannot be  empty!"),!1):35<e.length?(a(!1,r+" cannot be more than 35 characters!"),!1):/\d/g.test(e)?(a(!1,r+" cannot contain numbers and space!"),!1):(a(!0,r+" validated successfully!"),!0):"Empty"==t?""==e?(a(!1,r+" cannot be empty!"),!1):(a(!0,r+" validated successfully!"),!0):void 0}),b=e=>{c["modal-body"].innerHTML="";var t=n.cloneNode(!0),s=(c["modal-body"].appendChild(t),document.querySelector(".modal-body .templates"));["touchend","ondblclick"].forEach(e=>{var r,a;"ondblclick"==e?s.ondblclick=()=>{d.toggle()}:"touchend"==e&&(a=0,s.addEventListener(e,()=>{var e=(new Date).getTime(),t=e-a;clearTimeout(r),t<500&&0<t?(d.toggle(),event.preventDefault()):r=setTimeout(function(){clearTimeout(r)},500),a=e}))})},L=e=>{var t=l["tester-items"].querySelector("#add-item");let a=l["tester-items"].querySelector(".items-wrap"),s=1;t.addEventListener("click",e=>{s++;let r=l["tester-items"].querySelector(".items-wrap > .item-1").cloneNode(!0);r.classList.remove("item-1"),r.classList.add("item-"+s),r.querySelectorAll("[data-fm]").forEach(e=>{e.value=""}),a.appendChild(r),c["tester-items"].forEach((e,t)=>{e=e.querySelector(".item-1"),t=c["tester-items"][t],e=e.cloneNode(!0);e.classList.remove("item-1"),e.classList.add("item-"+s),e.querySelectorAll("[data-tm]").forEach(e=>{e.innerHTML=""}),t.appendChild(e)}),r.querySelector(".item-remove").addEventListener("click",e=>{var t=document.querySelector('[ffo-fmcomp="tester-items"] .items-wrap .'+r.className);t.parentNode.removeChild(t),document.querySelectorAll('[ffo-tmcomp="tester-items"] .'+r.className).forEach(e=>{e.parentNode.removeChild(e)})}),document.querySelectorAll(`[ffo-fmcomp="tester-items"] .items-wrap .${r.className} [data-fm]`).forEach(t=>{["keyup"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll(`[ffo-tmcomp="tester-items"]  .${r.className} [data-tm="${t.attributes["data-fm"].value}"]`).forEach(e=>{e.innerHTML=t.value})})})})}),document.querySelectorAll('[ffo-fmcomp="tester-items"] .items-wrap .item-1 [data-fm]').forEach(t=>{["keyup"].forEach(function(e){t.addEventListener(e,function(){document.querySelectorAll(`[ffo-tmcomp="tester-items"]  .item-1 [data-tm="${t.attributes["data-fm"].value}"]`).forEach(e=>{e.innerHTML=t.value})})})}),e(!0,"items are ready")};document.querySelectorAll(".com-wrapper").forEach(t=>{t.classList.contains("disable")&&(t.querySelector(".com-disable").checked=!0,t.attributes["com-fm"])&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.add("d-none")}),t.querySelector(".com-disable").addEventListener("click",e=>{t.classList.toggle("disable"),t.attributes["com-fm"]&&document.querySelectorAll(`[com-tm='${t.attributes["com-fm"].value}']`).forEach(e=>{e.classList.toggle("d-none")})}),t.querySelector(".com-close").addEventListener("click",e=>{t.classList.toggle("close")}),t.querySelector(".com-clear")&&t.querySelector(".com-clear").addEventListener("click",e=>{1!=t.querySelector(".com-disable").checked&&(t.querySelectorAll('.com-body input[type="text"]').forEach(e=>{e.value=""}),t.querySelectorAll(".com-body textarea").forEach(e=>{elA.value=""}),t.querySelectorAll('.com-body input[type="file"]').forEach(e=>{elA.value=""}))})});function q(e){""!=(f=e)?(0<(h=p.filter(e=>{return Object.keys(e).toString().toLowerCase().includes(f.toLowerCase())})).length&&(h.forEach((e,t,r)=>{e=`<button class="d-block" onclick="setCurrencyCall(${Object.values(e)})">${Object.keys(e)}</button>`;h[t]=e}),y.classList.remove("d-none")),h.length,0<h.length&&(y.innerHTML="",h.forEach((e,t)=>{y.innerHTML+=e}))):(y.classList.add("d-none"),h=[])}(u=document.querySelector('[data-fm="select-currency"]')).addEventListener("change",()=>{setCurrencyCall(u.selectedIndex)}),l.currency.querySelectorAll('[name="currency-type"').forEach(e=>{e.addEventListener("click",()=>{setCurrencyCall(u.selectedIndex)})}),p=[],u.querySelectorAll("option").forEach((e,t)=>{e={[e.innerHTML]:t};p[t]=e}),y=document.querySelector('[data-fm="search-currency-box"]'),v=document.querySelector('[data-fm="search-currency"]'),f="",h=[],window.addEventListener("click",function(e){e.target.attributes["data-fm"]&&("search-currency-box"==e.target.attributes["data-fm"].value||"search-currency"==e.target.attributes["data-fm"].value)||y.classList.add("d-none")}),v.addEventListener("keyup",e=>{q(v.value)}),v.addEventListener("focusin",e=>{q(v.value)}),(setCurrencyCall=t=>{var r,a=document.querySelector('[data-fm="select-currency"]');a.selectedIndex=t,l.currency.querySelector('[data-fm="currency-code"]').checked?c.currency.forEach(e=>{e.innerHTML=a.options[t].value}):(r=(r=(r=a.options[t].innerHTML).split("-").pop()).split(",",1).pop(),c.currency.forEach(e=>{e.innerHTML=r}))})(69),l["download-pdf"].addEventListener("click",()=>{{var e=(e,t)=>{e&&(l["spinner-grow"].style.display="inline-block",l["download-text"].innerHTML="PDF Generating...",e=n.cloneNode(!0),html2pdf().set({jsPDF:{format:"a4",orientation:"portrait"},html2canvas:{letterRendering:!0,useCORS:!0,logging:!0,scrollX:0,scrollY:0},margin:[20,20,0,20],padding:0,image:{type:"jpeg",quality:.98}}).from(e).toPdf().save("Tester bill by "+server.siteName).then(e=>{l["spinner-grow"].style.display="none",l["download-text"].innerHTML="Download"}).catch(e=>{console.log("PDF Error "+e)}))};let r=!0,a=(S(l["tester-driver-name"].value,"Empty","Driver name",function(e,t){e?s["tester-driver-name"].style.display="none":(s["tester-driver-name"].innerHTML=t,s["tester-driver-name"].style.display="block")}),S(l["tester-vehical-number"].value,"Empty","vehical number",function(e,t){e?s["tester-vehical-number"].style.display="none":(s["tester-vehical-number"].innerHTML=t,s["tester-vehical-number"].style.display="block")}),S(l["tester-address"].value,"Empty","Address",function(e,t){e?s["tester-address"].style.display="none":(s["tester-address"].innerHTML=t,s["tester-address"].style.display="block")}),S(l["tester-vehical-number"].value,"Empty","vehical number",function(e,t){e?s["tester-vehical-number"].style.display="none":(s["tester-vehical-number"].innerHTML=t,s["tester-vehical-number"].style.display="block")}),document.getElementsByClassName("validation-message"));Object.keys(a).some(function(e){var t;if("block"==a[e].style.display)return t="ErrorAdress"==a[e].id?130:80,t=a[e].getBoundingClientRect().top+window.pageYOffset-t,window.scrollTo({top:t,behavior:"smooth"}),r=!1,a[e].previousElementSibling.focus(),!0}),r?e(!0,"Template ready"):e(!1,"Template not ready")}})};